<h1>Gestion des utilisateurs</h1>

<table class="table">
  <thead>
    <tr>
      <th>Email</th>
      <th>Inscription</th>
      <th>Points</th>
      <th>Niveau</th>
      <th>Admin?</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= l(user.created_at, format: :short) %></td>
        <td><%= user.points %></td>
        <td>
          <%# Affichage du niveau avec un badge de couleur %>
          <% level = user.level_name %>
          <% css_class = case level
               when "Admin"       then "badge bg-danger"
               when "Avancé"      then "badge bg-success"
               when "Intermédiaire" then "badge bg-primary"
               else "badge bg-secondary"
             end %>
          <span class="<%= css_class %>"><%= level %></span>
        </td>
        <td><%= user.admin? ? 'Oui' : 'Non' %></td>
        <td>
          <%= link_to 'Éditer', edit_admin_user_path(user), class: "btn btn-sm btn-secondary" %>
          <% if user != current_user %>
            <%= link_to 'Supprimer', admin_user_path(user),
                  data: { turbo_method: :delete, confirm: "Supprimer ce compte ?" },
                  class: "btn btn-sm btn-danger" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to '← Retour au tableau de bord', admin_dashboard_path, class: "btn btn-link" %>
