<!-- app/views/admin/users/index.html.erb -->
<h2>Utilisateurs</h2>
<%= link_to "Exporter CSV", admin_users_path(format: :csv), class: "btn btn-sm btn-secondary" %>

<table class="table">
  <thead>
    <tr>
      <th>Email</th>
      <th>Points</th>
      <th>Niveau</th>
      <th>Admin</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.email %></td>
        <td><%= user.points %></td>
        <td><%= user.level_name %></td>
        <td><%= user.admin? ? 'Oui' : 'Non' %></td>
        <td>
          <%= link_to 'Modifier', edit_admin_user_path(user), class: "btn btn-sm btn-primary" %>
          <% if user != current_user %>
            <%= link_to 'Supprimer', admin_user_path(user), method: :delete, 
                         data: { confirm: "Supprimer dÃ©finitivement #{user.email} ?" },
                         class: "btn btn-sm btn-danger" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
