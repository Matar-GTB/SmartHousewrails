
<%= form_with url: devices_path, method: :get, local: true do %>
  <input type="text" name="query" placeholder="Rechercher..." value="<%= params[:query] %>"/>
  <select name="category">
    <option value="">-- Catégorie --</option>
    <!-- Options de catégories d'objets -->
    <option value="Sécurité">Sécurité</option>
    <option value="Énergie">Énergie</option>
    … 
  </select>
  <button type="submit">Filtrer</button>
<% end %>

<h2>Objets connectés</h2>
<p><%= @devices.count %> objet(s) trouvé(s).</p>

<% @devices.each do |device| %>
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title"><%= device.name %></h5>
      <p class="card-text"><%= device.description %></p>
      <%= link_to 'Voir détail', device_path(device), class: "btn btn-outline-primary btn-sm" %>
    </div>
  </div>
<% end %>
<% if current_user.admin? || current_user.advanced? %>
  <%= button_to (@device.status ? 'Désactiver' : 'Activer'),
        toggle_device_path(device), method: :patch, 
        class: "btn btn-sm <%= @device.status ? 'btn-warning' : 'btn-success' %>" %>
<% end %>

