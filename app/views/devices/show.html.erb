<h1><%= @device.name %></h1>

<p><strong>Description :</strong> <%= @device.description %></p>
<p><strong>Ajouté le :</strong> <%= l(@device.created_at, format: :long) %></p>

<!-- Bloc de demande de suppression pour les utilisateurs avancés (non admins) -->
<% if current_user.advanced? && !current_user.admin? %>
  <% if @device.deletion_requested? %>
    <p class="text-warning">Suppression en attente de validation par l’administrateur.</p>
  <% else %>
    <%= button_to "Demander la suppression", 
          request_deletion_device_path(@device), 
          data: { confirm: "Confirmer la demande de suppression ?" }, 
          class: "btn btn-outline-danger" %>
  <% end %>
<% end %>

<%# Boutons d'action %>
<%= link_to 'Retour à la liste', devices_path, class: "btn btn-light" %>
<% if current_user.admin? || current_user.advanced? %>
  <%= link_to 'Modifier', edit_device_path(@device), class: "btn btn-secondary" %>
<% end %>
<% if current_user.admin? %>
  <%= link_to 'Supprimer', device_path(@device), 
        data: { turbo_method: :delete, confirm: 'Confirmer la suppression ?' },
        class: "btn btn-danger" %>
<% end %>
<p>
  <strong>Statut :</strong>
  <%= @device.status ? "Actif" : "Inactif" %>
</p>
<p>
  <strong>Localisation :</strong>
  <%= @device.location.present? ? @device.location : "-" %>
</p>
<p>
  <strong>Catégorie :</strong>
  <%= @device.category ? @device.category.name : "-" %>
</p>

